<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>üî• Register - AV Site</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      .gradient-bg {
        background: linear-gradient(-45deg, #1a1a1a, #2d1b1b, #1a1a1a, #2d1b1b);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
      }
    </style>
  </head>
  <body class="gradient-bg text-white min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md">
      <div class="text-center mb-8">
        <div class="flex items-center justify-center gap-3 mb-2">
          <svg width="50" height="50" viewBox="0 0 40 40">
            <defs>
              <linearGradient id="logoGradient4" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
              </linearGradient>
            </defs>
            <circle cx="20" cy="20" r="18" fill="url(#logoGradient4)" opacity="0.2"/>
            <path d="M15 12 L15 28 L28 20 Z" fill="url(#logoGradient4)"/>
            <circle cx="20" cy="20" r="18" fill="none" stroke="url(#logoGradient4)" stroke-width="2"/>
          </svg>
          <h1 class="text-4xl font-black bg-gradient-to-r from-red-500 via-pink-500 to-red-500 bg-clip-text text-transparent tracking-tight">desiixvideo</h1>
        </div>
        <p class="text-gray-400">Join the community!</p>
      </div>
      <div class="bg-gray-900 bg-opacity-60 backdrop-blur-sm p-8 rounded-2xl border border-red-900 shadow-2xl">
        <h2 class="text-3xl font-bold mb-6 text-center">Register</h2>
        <form id="registerForm" class="space-y-4">
          <div>
            <input name="email" placeholder="Email" class="w-full p-3 rounded-lg bg-gray-800 border border-gray-700 focus:border-red-500 focus:outline-none transition" />
          </div>
          <div>
            <input name="password" type="password" placeholder="Password" class="w-full p-3 rounded-lg bg-gray-800 border border-gray-700 focus:border-red-500 focus:outline-none transition" />
          </div>
          <button type="submit" class="w-full p-3 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 rounded-lg font-semibold transform hover:scale-105 transition">
            ‚ú® Create Account
          </button>
        </form>
        <p class="mt-6 text-sm text-center text-gray-400">Already have an account? <a href="/login.html" class="text-red-400 hover:text-red-300 font-semibold">Login</a></p>
      </div>
    </div>

    <script src="/js/app.js"></script>
    <script>
      // Inline register handler as backup
      document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('registerForm');
        if (form) {
          console.log('‚úÖ Inline register handler loaded');
          form.addEventListener('submit', async function(e) {
            e.preventDefault();
            console.log('üìù Form submitted via inline handler');
            
            const email = form.email.value;
            const password = form.password.value;
            
            if (!email || !password) {
              alert('Please enter email and password');
              return;
            }
            
            try {
              const response = await fetch('/api/auth/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
              });
              
              const data = await response.json();
              
              if (!response.ok) {
                throw new Error(data.message || 'Registration failed');
              }
              
              console.log('‚úÖ Registration successful!');
              localStorage.setItem('token', data.token);
              window.location.href = '/';
            } catch (err) {
              console.error('‚ùå Registration error:', err);
              alert('Registration failed: ' + err.message);
            }
          });
        }
      });
    </script>
  </body>
</html>
